import{_ as i,o as a,c as e,ag as t}from"./chunks/framework.BvfOCw1h.js";const c=JSON.parse('{"title":"Error Message Localization","description":"","frontmatter":{},"headers":[],"relativePath":"features/localization.md","filePath":"features/localization.md"}'),l={name:"features/localization.md"};function n(r,s,o,h,p,d){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="error-message-localization" tabindex="-1">Error Message Localization <a class="header-anchor" href="#error-message-localization" aria-label="Permalink to &quot;Error Message Localization&quot;">​</a></h1><p>ErrorLens supports localizing error messages via the <code>IErrorMessageLocalizer</code> abstraction. This is opt-in — by default, messages pass through unchanged.</p><h2 id="default-behavior" tabindex="-1">Default Behavior <a class="header-anchor" href="#default-behavior" aria-label="Permalink to &quot;Default Behavior&quot;">​</a></h2><p><code>NoOpErrorMessageLocalizer</code> is registered via <code>TryAddSingleton</code> and passes all messages through without modification. No setup required.</p><h2 id="enabling-localization" tabindex="-1">Enabling Localization <a class="header-anchor" href="#enabling-localization" aria-label="Permalink to &quot;Enabling Localization&quot;">​</a></h2><p>Call <code>AddErrorHandlingLocalization&lt;TResource&gt;()</code> to replace the no-op implementation:</p><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.Services.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddLocalization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> options.ResourcesPath </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Resources&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.Services.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddErrorHandling</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.Services.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddErrorHandlingLocalization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SharedErrorMessages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;();</span></span></code></pre></div><p>This bridges to <code>IStringLocalizer&lt;T&gt;</code> and uses error codes as resource keys.</p><h2 id="resource-files" tabindex="-1">Resource Files <a class="header-anchor" href="#resource-files" aria-label="Permalink to &quot;Resource Files&quot;">​</a></h2><p>Create <code>.resx</code> files with error codes as keys:</p><p><strong>Resources/SharedErrorMessages.resx</strong> (default / English):</p><table tabindex="0"><thead><tr><th>Key</th><th>Value</th></tr></thead><tbody><tr><td><code>USER_NOT_FOUND</code></td><td>User not found.</td></tr><tr><td><code>VALIDATION_FAILED</code></td><td>One or more validation errors occurred.</td></tr></tbody></table><p><strong>Resources/SharedErrorMessages.fr.resx</strong> (French):</p><table tabindex="0"><thead><tr><th>Key</th><th>Value</th></tr></thead><tbody><tr><td><code>USER_NOT_FOUND</code></td><td>Utilisateur introuvable.</td></tr><tr><td><code>VALIDATION_FAILED</code></td><td>Une ou plusieurs erreurs de validation se sont produites.</td></tr></tbody></table><h2 id="request-localization" tabindex="-1">Request Localization <a class="header-anchor" href="#request-localization" aria-label="Permalink to &quot;Request Localization&quot;">​</a></h2><p>Configure ASP.NET Core&#39;s <code>RequestLocalizationMiddleware</code>:</p><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> supportedCultures</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;fr&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;de&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.Services.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Configure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RequestLocalizationOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    options.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SetDefaultCulture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    options.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddSupportedUICultures</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(supportedCultures);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> builder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UseRequestLocalization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>The localizer uses <code>CultureInfo.CurrentUICulture</code> to resolve the correct resource file.</p><h2 id="what-gets-localized" tabindex="-1">What Gets Localized <a class="header-anchor" href="#what-gets-localized" aria-label="Permalink to &quot;What Gets Localized&quot;">​</a></h2><p>Localization applies to all parts of the error response:</p><ul><li>Top-level <code>message</code></li><li><code>fieldErrors[].message</code></li><li><code>globalErrors[].message</code></li><li><code>parameterErrors[].message</code></li></ul>`,21)])])}const E=i(l,[["render",n]]);export{c as __pageData,E as default};
